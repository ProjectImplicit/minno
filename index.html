<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Meta, title, CSS, favicons, etc. -->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>Minno.js</title>
		
		<!-- Bootstrap core CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
        <style>
            .serif { font-family: Georgia, "Times New Roman", Times, serif;}
            body {font-size: 16px; font-family:"Open Sans",Helvetica,Arial,sans-serif}
            .intro {font-size: 1.2em;margin: auto 0; max-width: 920px}
            .container {max-width: 920px;}
            .success-message, .error-message {display:none}

            .editor { margin-top: 1em; border-radius: 4px 4px 0; border: 1px solid #ddd; height: 30em; font-size: 14px; }
            @-webkit-keyframes fadeIn { 0% {opacity: 0;} 20% {opacity: 1;} 80% {opacity: 1;} 100% {opacity: 0;} }
            @keyframes fadeIn { 0% {opacity: 0;} 20% {opacity: 1;} 80% {opacity: 1;} 100% {opacity: 0;} }
            .fadeIn { -webkit-animation-name: fadeIn; animation-name: fadeIn; animation-duration: 6s; opacity:0; }
        </style>

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

		<!-- Favicons -->
		<link rel="apple-touch-icon" href="apple-touch-icon.png">
		<link rel="icon" href="favicon.ico">
	</head>

	<body>
		<!-- Docs master nav -->
		<header class="navbar navbar-static-top bs-docs-nav" id="top">
			<div class="container">
				<div class="navbar-header">
					<button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a href="../../" class="navbar-brand">Minno</a>
				</div>
				<nav class="collapse navbar-collapse bs-navbar-collapse">
					<ul class="nav navbar-nav">
						<li>
							<a href="minno-quest/0.1/basics/overview.html">Basics</a>
						</li>
						<li>
							<a href="minno-quest/0.1/quest/overview.html">miQuest</a>
						</li>
						<li>
							<a href="minno-quest/0.1/manager/overview.html">miManager</a>
						</li>
						<li>
							<a href="minno-time/0.3">miPlayer</a>
						</li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
                        <li><a href="https://github.com/minnojs">Github</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <div id="content" class="bs-docs-header">
            <div class="container">
                
                <h1 class="serif">Minno</h1>
                <p>An open source JavaScript player for creating web studies in behavioral science</p>

            </div>
		</div>

        <div class="container minno-container">
            <section>
                <h3>What is minno?</h3> 
                Minno is a free tool for creating web studies with sophisticated questionnaires and reaction time tasks.
                It supports all major web browsers.
                Minno scripts are easy to write, without previous knowledge in programming.
                Minno has been developed by <a href="http://projectimplicit.net/about.html">Project Implicit</a> for running social cognitive experiments online.
                On Project Implicit's <a href="http://implicit.harvard.edu/implicit">website</a>, studies developed with Minno.js collect data from thousands of participants every day.
            </section>

            <section>
                <h3>How to cite</h3>
                <blockquote>
                    Zlotnick, E., Dzikiewicz, A., Bar-Anan, Y. (2015). Minno.js (Version 0.3) [Computer software].
                </blockquote>
            </section>

            <section id="quest">
                <h3>A simple questionaire</h3>
                <p> miQuest builds and runs questionnaires. It runs a sequence of pages, each with a sequence of questions. miQuest supports open-ended questions, multiple-choice questions, grids, sliders (visual analog scale), and ranking. It supports various mechanisms for question randomization, and for selecting questions based on previous user response and experimental conditions.</p>
                <p> <button class="btn btn-default btn-lg btn-block" type="button">Activate</button> </p>

                <div class="alert alert-success success-message">
                    <strong>Well Done!</strong> The questionnaire has been successfully completed.
                </div>
                <div class="alert alert-danger error-message">
                    <strong>Oh Snap!</strong> Something went wrong with the questionnaire. Why don't you fix it and try again?
                </div>

                <div class="editor">define(['questAPI'], function(Quest){
	var API = new Quest();

	API.addQuestionsSet('basicSelect',
	{
		type: 'selectOne',
		style:'multiButtons',
		errorMsg: {
			required: "Please select an answer, or click 'decline to answer'"
		},
		answers : ['Strongly Disagree', 'Disagree', 'Agree', 'Strongly Agree']
	});

	API.addQuestionsSet('item',
	[
		{inherit : 'basicSelect', name:'item1',
		stem : 'On the whole, I am satisfied with myself.'},
		{inherit : 'basicSelect', name:'item2',
		stem : 'At times I think I am no good at all.'},
		{inherit : 'basicSelect', name:'item3',
		stem : 'I feel that I have a number of good qualities.'},
		{inherit : 'basicSelect', name:'item4',
		stem : 'I am able to do things as well as most other people.'},
		{inherit : 'basicSelect', name:'item5',
		stem : 'I feel I do not have much to be proud of.'},
		{inherit : 'basicSelect', name:'item6',
		stem : 'I certainly feel useless at times.'},
		{inherit : 'basicSelect', name:'item7',
		stem : 'I wish I could have more respect for myself.'},
		{inherit : 'basicSelect', name:'item8',
		stem : 'All in all, I am inclined to feel that I am a failure.'},
		{inherit : 'basicSelect', name:'item9',
		stem : 'I take a positive attitude toward myself.'},
		{inherit : 'basicSelect', name:'item10',
		stem : "I feel that I'm a person of worth, at least on an equal plane with others."}
	]);

	API.addSequence(
	[
		{
			mixer : 'repeat',
			times : 10,
			data :
			[
			    {
		            progressBar: '<%= pagesMeta.number %> out of 10',
		            questions : {inherit:{set:'item', type:'exRandom'}}
            	}
			]
		}
	]);

	return API.script;
});
		</div>
            </section>

            <section id="time">
                <h3>A simple time sensitive task</h3>
                <p>miTime builds and runs tasks typical for cognitive psychology (reaction-time tasks). miTime runs a sequence of trials, and supports various mechanisms for randomization of trials and stimuli. Each trial describes a sequence of events (mostly, stimulus presentation and keyboard and mouse responses). Because Minno.js is JavaScript-based and does not require any installation on the participant's computer, time-precision is often inferior to the precision typically achieved with common tools for lab studies. From our experience, experiments with Minno-Time obtain results similar to those obtained with lab experiments. However, it is nearly impossible to guarantee that timing was 100% accurate for all participants in all trials. For example, assuring subliminal presentation of stimuli is unlikely. MiTime accepts mouse and keyboard input, supports presentation of images and text, and is compatible with all major browsers. Read more.</p>
                <p> <button class="btn btn-default btn-lg btn-block" type="button">Activate</button> </p>

                <div class="alert alert-success success-message">
                    <strong>Well Done!</strong> The task has been successfully completed.
                </div>
                <div class="alert alert-danger error-message">
                    <strong>Oh Snap!</strong> Something went wrong with the task. Why don't you fix it and try again?
                </div>

                <div class="editor">// We've been slowly pulling the stroop task together, now is the time for a few last touches, just to get the feel for how things work.
define(['pipAPI'], function(APIconstructor) {

	var API = new APIconstructor();

	API.addStimulusSets({
        red: [
    		{media:'Red', css:{color:'red'}},
    		{media:'Blue', css:{color:'red'}}
    	], 
        blue: [
    		{media:'Red', css:{color:'blue'}},
    		{media:'Blue', css:{color:'blue'}}
    	],
    	error: [
    	    {handle:'error',media:'X', css:{fontSize:'2em',color:'#FF0000'}, location:{bottom:30}}
    	]
	});

	API.addTrialSets('base',[{
		input: [
			{handle:'red',on:'keypressed',key:'1'},
			{handle:'blue',on:'keypressed',key:'2'}
		],
		layout: [
			{media:'1',location:{left:2,top:2},css:{background:'red',padding:'2%',fontSize:'1.5em'}},
			{media:'2',location:{right:2,top:2},css:{background:'blue',padding:'2%',fontSize:'1.5em'}},
			{media:'Press 1 for red, 2 for blue',location:{bottom:1}}
		],
		interactions: [
			{
				conditions:[{type:'begin'}],
				actions: [{type:'showStim', handle: 'target'}]
			},
			{
				conditions: [
					{type:'inputEqualsTrial',property:'group'}
				],
				actions: [
					{type:'setTrialAttr', setter:{score:1}},
					{type:'log'},
					{type:'trigger', handle:'ITI'}
				]
			},
			{
				conditions: [
					{type:'inputEqualsTrial',property:'group',negate:true},
					{type:'inputEquals',value:['red','blue']}
				],
				actions: [
					{type:'setTrialAttr', setter:{score:0}},
					{type:'log'},
					{type:'showStim', handle:'error'},
					{type:'removeInput',handle:['red','blue','green']},
					{type:'trigger', handle:'ITI', duration:500}
				]
			},
			{
				conditions: [{type:'inputEquals', value:'ITI'}],
				actions:[
					{type:'hideStim',handle:'All'},
					{type:'removeInput',handle:['red','blue','green']},
					{type:'trigger', handle:'end',duration:500}
				]
			},
			{
				conditions: [{type:'inputEquals', value:'end'}],
				actions:[
					{type:'endTrial'}
				]
			}
		]
	}]);

	API.addSequence([
		{
			mixer: 'random',
			data: [
				{
					mixer: 'repeat',
					times: 10,
					data: [
						{
		                    inherit:'base',
		                    data: {group:'red'},
		                    stimuli: [
			                    {inherit:{set:'red',type:'exRandom'}, handle:'target'},
			                    {inherit:'error'}
		                    ]
	                    },
						{
		                    inherit:'base',
		                    data: {group:'blue'},
		                    stimuli: [
			                    {inherit:{set:'blue',type:'exRandom'}, handle:'target'},
			                    {inherit:'error'}
		                    ]
	                    }
					]
				}
			]
		}
	]);

	// Return script
	return API.script;
});
		</div>
            </section>

            <section id="manager">
                <h3>A simple manager task</h3>
                <p>Manager presents a sequence of tasks (mostly, questionnaires, reaction-time tasks, and instruction pages). It supports various mechanisms for randomization, and for selecting tasks based on previous user response and on experimental conditions. Read more.</p>
                <p> <button class="btn btn-default btn-lg btn-block" type="button">Activate</button> </p>

                <div class="alert alert-success success-message">
                    <strong>Well Done!</strong> The manager has been successfully completed.
                </div>
                <div class="alert alert-danger error-message">
                    <strong>Oh Snap!</strong> Something went wrong with the manager. Why don't you fix it and try again?
                </div>

                <div class="editor">define(['managerAPI'], function(Manager){

    var API = new Manager();
	API.addSettings('skin','demo');

    API.addSequence([
        {
            type:'message', 
            template:'<br/><h1>Click space for examples of a self-esteem questionnaire and a Stroop task</h1>', keys: ' '
        }, 
        {
			type: 'quest', name: 'rosenberg', scriptUrl: 'rosenberg.js'
		},
        {
			type: 'pip', name: 'stroop', version: '0.3', scriptUrl: 'stroop.js'
		},
		{
            type:'message', template:'<br/><h1>Click space to finish the study</h1>', keys: ' '
        }
    ]);

    return API.script;
});
</div>
            </section>
        </div>

        <script src="minno-quest/bower_components/ace-builds/src-min/ace.js" type="text/javascript" charset="utf-8"></script>
		<script>
		    var win, hasError = false;
            var quest = setup('quest', document.getElementById('quest'));
            var time = setup('time', document.getElementById('time'));
            var manager = setup('manager', document.getElementById('manager'), function(){
                return {
                    mgr: manager.getValue(),
                    quest: quest.getValue(),
                    time: time.getValue()
                }
            });

            function setup(type, el, mgrFn){
                var button = el.querySelector('button');
                var editor = ace.edit(el.querySelector('.editor'));
                editor.setTheme("ace/theme/monokai");
                editor.getSession().setMode("ace/mode/javascript");
                editor.$blockScrolling = Infinity;
                button.addEventListener('click', click);
                return editor;

                function click(){
                    hasError = false; // assume the feedback is success

                    // clean out open window
                    if (win){
                        win.close();
                        win = null;
                    }

                    win = window.open('playground.html', 'Playground');

                    win.onload = function(){
                        win.addEventListener('unload', function(event) {
                            window.focus();
                            fade(el.querySelector(hasError ? '.error-message' : '.success-message'));
                        });
                        win.activate(type, mgrFn ? mgrFn() : editor.getValue());
                    };
                }
            }

	    	window.addEventListener('error', function(e){
	    		console.error(e);
	    		feedbackId = 'error';
	    	});

	    	function fade(el){
				el.style.display = 'block';
				el.classList.add('fadeIn');
				setTimeout(function(){
					el.style.display = 'none';
					el.classList.remove('fadeIn');
				}, 6000);
	    	}
		</script>

    </body>
</html>

<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.74.3" /><META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Advanced logging techniques | </title><meta property="og:title" content="Advanced logging techniques" />
<meta property="og:description" content="The logger controls the way(s) that you save the data your study collects. You can define the logging method for any of your tasks (manager, time, and quest) within its settings. If you do not define a logger for a task, it will default to the logger defined in your manager.
Syntax Folowing are the properties available for the logger:
   property description     url The url to send to." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/en/docs/core/logger/" />

<meta itemprop="name" content="Advanced logging techniques">
<meta itemprop="description" content="The logger controls the way(s) that you save the data your study collects. You can define the logging method for any of your tasks (manager, time, and quest) within its settings. If you do not define a logger for a task, it will default to the logger defined in your manager.
Syntax Folowing are the properties available for the logger:
   property description     url The url to send to.">

<meta itemprop="wordCount" content="577">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Advanced logging techniques"/>
<meta name="twitter:description" content="The logger controls the way(s) that you save the data your study collects. You can define the logging method for any of your tasks (manager, time, and quest) within its settings. If you do not define a logger for a task, it will default to the logger defined in your manager.
Syntax Folowing are the properties available for the logger:
   property description     url The url to send to."/>







<link rel="preload" href="/scss/main.min.2b3f0c56cf34795796f776325f0851d09b271972227cc6cb952d02ee2a9955bd.css" as="style">
<link href="/scss/main.min.2b3f0c56cf34795796f776325f0851d09b271972227cc6cb952d02ee2a9955bd.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold"></span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a  class="nav-link" href="/en/about/" ><span>About</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a  class="nav-link active" href="/en/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a  class="nav-link" href="/en/blog/" ><span>Blog</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-default td-outer">
      <main role="main" class="td-main">
        

<p>The logger controls the way(s) that you save the data your study collects.
You can define the logging method for any of your tasks (manager, time, and quest) within its settings.
If you do not define a logger for a task, it will default to the logger defined in your manager.</p>
<h2 id="syntax">Syntax</h2>
<p>Folowing are the properties available for the logger:</p>
<table>
<thead>
<tr>
<th>property</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td>The url to send to. If it is not set, data will not be sent.</td>
</tr>
<tr>
<td>type</td>
<td>The strategy to use for sending logs to the server. See options below.</td>
</tr>
<tr>
<td>pulse</td>
<td>Allows you to post your data in pulses of &ldquo;pulse&rdquo; logs instead of all at the end of the task (Does not work for csv logger).</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">API</span>.<span style="color:#a6e22e">addSettings</span>(<span style="color:#e6db74">&#39;logger&#39;</span>, {
    <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/manager/data&#39;</span>,
    <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;new&#39;</span>,
    <span style="color:#a6e22e">pulse</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>
});
</code></pre></div><p>By deafault the logger posts according to the Project Implicit server rules (old).
You can change the logging style by setting the logger <code>type</code> as follows:</p>
<table>
<thead>
<tr>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>old</td>
<td>Uses the post strategy implemented by the old PI server</td>
</tr>
<tr>
<td>new</td>
<td>Uses the post strategy implemented by the new server</td>
</tr>
<tr>
<td>csv</td>
<td>Posts all data as CSV at the end of the manager. If you are creating a manager that does not fully complete (for instance, when you have a message as your last page), use the postCSV task in addition to settings the log type to csv.</td>
</tr>
<tr>
<td>debug</td>
<td>Logs all posts to the console. Do not do this in production! These logs aren&rsquo;t posted to the server at all!</td>
</tr>
</tbody>
</table>
<p>You can change the logging strategy or even create new strategies.
Doing this is rather advanced and is documented below.</p>
<h2 id="advanced-use">Advanced use</h2>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    <!-- raw HTML omitted -->

</div>

<p>The logger is responsible for managing multiple streams of logs and allowing easy fine tuning of posting them to a server.
Each logger can create named log streams that can then be used to manage your data.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">Logger</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./logger&#39;</span>;
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">noop</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(){};
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">settings</span> <span style="color:#f92672">=</span> {
    <span style="color:#a6e22e">onRow</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">log</span>) =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">log</span>), 
    <span style="color:#a6e22e">onEnd</span><span style="color:#f92672">:</span>()=&gt;<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;The end&#39;</span>), 
    <span style="color:#a6e22e">serialize</span><span style="color:#f92672">:</span><span style="color:#a6e22e">noop</span>, 
    <span style="color:#a6e22e">send</span><span style="color:#f92672">:</span><span style="color:#a6e22e">noop</span>
};

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">logger</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Logger</span>(<span style="color:#a6e22e">settings</span>);
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">managerLog</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">createLog</span>(<span style="color:#e6db74">&#39;manager&#39;</span>);

<span style="color:#a6e22e">managerLog</span>(<span style="color:#e6db74">&#39;first log&#39;</span>); <span style="color:#75715e">// logs &#39;first log&#39;
</span><span style="color:#75715e"></span><span style="color:#a6e22e">managerLog</span>(<span style="color:#e6db74">&#39;second log&#39;</span>); <span style="color:#75715e">// logs &#39;second log&#39;
</span><span style="color:#75715e"></span><span style="color:#a6e22e">managerLog</span>.<span style="color:#a6e22e">end</span>(<span style="color:#66d9ef">true</span>); <span style="color:#75715e">// logs &#39;The end&#39;
</span></code></pre></div><p>The raw logger takes a settings object with four properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Signature</th>
<th>Descritpion</th>
</tr>
</thead>
<tbody>
<tr>
<td>onRow</td>
<td>(logName, log, settings, ctx) =&gt; Any|undefined</td>
<td>Maps over the log stream, return any value in order to pass it to <code>serialize</code>.</td>
</tr>
<tr>
<td>onEnd</td>
<td>(logName, settings, ctx) =&gt; Any|undefined</td>
<td>Gets called when a stream ends, return any value in order to pass it to <code>serialize</code>.</td>
</tr>
<tr>
<td>serialize</td>
<td>(logName, logs, settings, ctx) =&gt; Any</td>
<td>Transforms the logs returned by onRow/onEnd before sending them</td>
</tr>
<tr>
<td>send</td>
<td>(logName, serialized, settings, ctx) =&gt; void</td>
<td>Sends serialized data to server (or whatever&hellip;)</td>
</tr>
</tbody>
</table>
<p>The arguments for the logging functions are as follows:</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>logName</td>
<td>The name for this log group - the name of the task producing these logs.</td>
</tr>
<tr>
<td>log/logs/serialized</td>
<td>The data piped down to this function.</td>
</tr>
<tr>
<td>settings</td>
<td>The settings object + some meta data. See below for some additional details.</td>
</tr>
<tr>
<td>ctx</td>
<td>The context object of the logger. You can assign any values you like into it. This is a good place to keep state across logging actions.</td>
</tr>
</tbody>
</table>
<ul>
<li>The settings object here is rather dynamic. It is composed of
(a) The defalut settings as defined by the <code>type</code> settings.
(b) The manager logger settings.
(c) The task logger settings.
(d) If the log was created by API.save <code>settings.isManual</code> is set to true.
(e) The task type is set into <code>settings.is&lt;Type&gt;</code> so that quest tasks will have <code>settings.isQuest</code> set to true.</li>
</ul>



      </main>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        
        
	
		<p class="mt-2"><a href="/en/about/">About MinnoJS</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>











<script src="/js/main.min.b201a3c9217360dbc0727dd320ea5f0bfc3f9128a4baa02246fb92034f9442a3.js" integrity="sha256-sgGjySFzYNvAcn3TIOpfC/w/kSikuqAiRvuSA0&#43;UQqM=" crossorigin="anonymous"></script>




  </body>
</html>